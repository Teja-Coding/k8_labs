apiVersion: apps/v1        # Kubernetes API version used for Deployment resource
kind: Deployment           # Type of Kubernetes object (Deployment manages Pods)

metadata:
  name: nginx-deployment   # Name of the Deployment (must be unique in namespace)
  labels:
    app: nginx             # Label to identify the application
    project: roboshop      # Custom label for grouping under project "roboshop"
    purpose: deployment-nginx   # Label describing purpose of this resource

spec:
  replicas: 5              # Number of Pod replicas Kubernetes should maintain

  selector:
    matchLabels:
      app: nginx           # Deployment will manage Pods with these labels
      project: roboshop
      purpose: deployment-nginx
      # IMPORTANT: must match template.metadata.labels below

  template:                # Pod template â€” defines how Pods should be created
    metadata:
      labels:
        app: nginx         # Labels assigned to created Pods
        project: roboshop
        purpose: deployment-nginx
        # These labels MUST match selector.matchLabels

    spec:                  # Specification of the Pod
      containers:
        - name: nginx      # Name of the container inside the Pod
          image: nginx:1.14.2   # Docker image + tag used for container
          ports:
            - containerPort: 80   # Container listens on port 80 (HTTP)
